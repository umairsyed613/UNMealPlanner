@inject IJSRuntime JsRuntime
<style>
    .container-fluid {
        padding: 0 !important;
    }
    .badge {
        font-weight: normal !important;
    }

</style>
<div class="d-flex flex-column cal-containerMobile">
    <div class="calendar-header-mobile d-flex align-items-center w-100 user-select-none">
        <h1 class="flex-1 pl-2">
            @CalendarBuilder.GetMonthName(DateTime.Now.Year, DateTime.Now.Month)
            <span class="badge badge-secondary">@DateTime.Now.Year</span>
        </h1>
        <small class="text-muted">Switch View</small>

        <button id="SwitchView" class="btn" @onclick="@(() => ChangeView?.Invoke())" data-toggle="tooltip" data-placement="top" title="Tap to switch view">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-calendar-day" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z" />
                <path d="M4.684 11.523v-2.3h2.261v-.61H4.684V6.801h2.464v-.61H4v5.332h.684zm3.296 0h.676V8.98c0-.554.227-1.007.953-1.007.125 0 .258.004.329.015v-.613a1.806 1.806 0 0 0-.254-.02c-.582 0-.891.32-1.012.567h-.02v-.504H7.98v4.105zm2.805-5.093c0 .238.192.425.43.425a.428.428 0 1 0 0-.855.426.426 0 0 0-.43.43zm.094 5.093h.672V7.418h-.672v4.105z" />
            </svg>
        </button>
    </div>
    <div class="d-flex flex-row flex-nowrap cal-mobile">
        <div class="d-flex flex-column w-100 p-1">
            @for (int i = 1; i <= CalenderData.Count; i++)
            {
                var j = i - 1;
                <CalendarDay Item="@CalenderData[j]" Nr="i" IsMobileView="true" />
            }
        </div>
    </div>
</div>

@code {
    [Parameter]
    public Action ChangeView { get; set; }

    List<CalenderViewItem> CalenderData = null;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        CalenderData = CalendarBuilder.GetDaysOfMonthForMobileView(DateTime.Now.Year, DateTime.Now.Month);
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JsRuntime.InvokeVoidAsync("CheckForToday");
    }

}
